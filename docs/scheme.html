<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="qrcode.js"></script>
</head>
<body>
<div>
    <button><a id="login" href="#"><h1>点击登录跳转学习强国app</h1></a></button>
</div>
<div id="wx"></div>
<div id="qrcode" style="margin-top: 10px">
    <img id="img" src="#"  alt="#"/>
</div>
</body>
<script>
    function load() {
        let search = window.location.search
        search = search.substring(1,search.length)
        document.getElementById("login").setAttribute("href","dtxuexi://appclient/page/study_feeds?url="+search)
        console.log(unescape(search))
        let imgBase64 = jrQrcode.getQrBase64(unescape(search), {});
        document.getElementById("img").setAttribute("src",imgBase64)
        document.getElementById("login").click()
    }
    function isWeixin () {
        let user= navigator.userAgent.toLowerCase();
        if(user.match(/MicroMessenger/i)==="micromessenger") {
            console.log('微信')
            document.getElementById("wx").innerText = "检测到微信环境，请单击右上角选择浏览器打开跳转"
        } else {
            console.log('非微信')
        }
    }
    isWeixin()
    load()

</script>
</html>